---
title: Make Call
description: Create a function or utility file to manage API calls and mutations using React Query for efficient state management.
---

## Command
Follow this command to create a new call.
```plaintext
lukio make:call
```

## Available
This command is available for:
- Fullstack nextjs
- Frontend nextjs

## Example
```plaintext
lukio make:call
Enter your call name: profile
Select your call type:
- query
- mutation
```

## Output
File will be created in `src/calls/call_profile.ts`

<Tabs defaultValue="query" className="pt-5 pb-1">
    <TabsList>
    <TabsTrigger value="query">Query (GET)</TabsTrigger>
    <TabsTrigger value="mutation">Mutation (POST, PUT, PATH, DELETE)</TabsTrigger>
    </TabsList>
    <TabsContent value="query">
```plaintext
/**
* @author lukio-cli
* @generated at 2000-01-01 00:00:00
* This file is generated by lukio CLI
*/

import { ApiClient } from "@/server/clients/hono.client";
import { OnError, type ErrorResponse } from "@/utils/asert_error";
import { useQuery } from "@tanstack/react-query";

const queryFn = async () => {
    try {
        const client = await ApiClient();
        const r = await client.api.ex.$get();
        if (!r.ok) {
            const err: ErrorResponse = await r.json();
            const error = OnError(err);
            throw new Error(`Ups : ${error}`);
        }
        const data = await r.json();
        return data.results;
    } catch (error) {
        const er = error instanceof Error ? error.message : String(error);
        throw new Error(er);
    }
};
const CallProfile = () => {
    return useQuery({
        queryKey: ["Profile"],
        queryFn,
        retry: 1,
    });
};

export default CallProfile;
```
    </TabsContent>
    <TabsContent value="mutation">
```plaintext
/**
* @author lukio-cli
* @generated at 2000-01-01 00:00:00
* This file is generated by lukio CLI
*/

import { ApiClient } from "@/server/clients/hono.client";
import type ProfileSchema from "@/server/schema/profile.schema";
import { useMutation } from "@tanstack/react-query";
import type { z } from "zod";
import { type ErrorResponse, OnError } from "@/utils/asert_error";

const mutationFn = async (data: z.infer<typeof ProfileSchema>) => {
    try {
        const client = await ApiClient();
        const r = await client.api.ex.$post({
            json: data,
        });
        if (!r.ok) {
            const err: ErrorResponse = await r.json();
            const error = OnError(err);
            throw new Error(`Ups : ${error}`);
        }
        const resp = await r.json();
        return resp;
    } catch (error) {
        const er = error instanceof Error ? error.message : String(error);
        throw new Error(er);
    }
};

const CallProfile = () => {
    return useMutation({
        mutationKey: ["Profile"],
        mutationFn,
    });
};
export default CallProfile;
```
    </TabsContent>
</Tabs>
